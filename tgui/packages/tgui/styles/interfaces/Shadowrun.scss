// =============================================================================
// SHADOWRUN GLOBAL UI STYLES
// =============================================================================
// Shared styling variables and utility classes for consistent Shadowrun theming
// across all tgui interfaces.

@use 'sass:color';
@use '../colors.scss';

// =============================================================================
// COLOR PALETTE
// =============================================================================

// Core accent colors - enhanced for cyberpunk vibrancy
$sr-gold: #caa53d; // Primary gold accent (physical/resources)
$sr-gold-bright: #ffe066;
$sr-gold-dim: color.scale($sr-gold, $lightness: -20%);
$sr-gold-glow: rgba(#ffe066, 0.4);

$sr-teal: #03fca1; // Secondary accent (special/magic)
$sr-teal-bright: #4dffcc;
$sr-teal-glow: rgba(#03fca1, 0.35);

$sr-purple: #9b59b6; // Tertiary accent (mental) - enhanced
$sr-purple-bright: #c77dff;
$sr-purple-glow: rgba(#9b59b6, 0.35);

$sr-cyan: #00d4ff; // Cyberpunk neon cyan
$sr-cyan-glow: rgba(#00d4ff, 0.35);

$sr-magenta: #ff2d95; // Cyberpunk neon magenta
$sr-magenta-glow: rgba(#ff2d95, 0.35);

// Corporation colors
$sr-renraku-red: #ff3333;
$sr-shiawase-orange: #ff9f1c;
$sr-lone-star-blue: #4488dd;
$sr-docwagon-green: #00ff88;
$sr-ares-gold: #ffd700;

// Status colors - vibrant neon
$sr-good: #00ff88;
$sr-bad: #ff4466;
$sr-caution: #ffcc00;
$sr-neutral: #888888;

// Background colors
$sr-bg-dark: rgba(0, 0, 0, 0.35);
$sr-bg-darker: rgba(0, 0, 0, 0.5);
$sr-bg-panel: rgba(8, 12, 15, 0.95);
$sr-bg-input: rgba(15, 18, 22, 0.95);
$sr-bg-terminal: rgba(5, 8, 12, 0.98);

// Border colors
$sr-border-light: rgba(255, 255, 255, 0.15);
$sr-border-medium: rgba(255, 255, 255, 0.25);
$sr-border-gold: rgba($sr-gold, 0.5);
$sr-border-teal: rgba($sr-teal, 0.5);

// Focus indicator colors
$sr-focus-color: $sr-cyan;
$sr-focus-outline: 2px solid $sr-focus-color;
$sr-focus-glow:
  0 0 0 3px rgba($sr-cyan, 0.35),
  0 0 12px rgba($sr-cyan, 0.25);

// =============================================================================
// TYPOGRAPHY
// =============================================================================

// Font stacks
$sr-font-display: 'Libre Baskerville', Georgia, serif;
$sr-font-body: 'Jost', 'Segoe UI', sans-serif;
$sr-font-mono: 'Consolas', 'Monaco', monospace;

// =============================================================================
// GLOBAL SHADOWRUN CONTAINER CLASS
// =============================================================================
// Apply .Shadowrun to any container to get consistent styling

.Shadowrun {
  font-family: $sr-font-body;

  // Global focus-visible fallback for any interactive element not explicitly styled
  *:focus-visible {
    outline: $sr-focus-outline;
    outline-offset: 2px;
  }

  // Section styling
  .Section {
    background: $sr-bg-dark;
    border: 2px solid $sr-border-light;
    box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.35);
  }

  .Section__title {
    background: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0.35),
      rgba(0, 0, 0, 0.15)
    );
    border-bottom: 1px solid rgba($sr-gold, 0.5);
  }

  .Section__titleText {
    font-family: $sr-font-display;
    letter-spacing: 0.02em;
  }

  // Button styling
  .Button {
    background: linear-gradient(
      135deg,
      rgba(40, 40, 45, 0.9),
      rgba(25, 25, 30, 0.95)
    );
    border: 1px solid $sr-border-light;
    border-radius: 2px;
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.1),
      0 2px 4px rgba(0, 0, 0, 0.3);
    clip-path: none;
    font-family: $sr-font-body;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    transition: all 0.15s ease;

    &:hover:not(.Button--disabled) {
      background: linear-gradient(
        135deg,
        rgba(55, 55, 60, 0.95),
        rgba(35, 35, 40, 0.95)
      );
      border-color: $sr-border-gold;
      box-shadow:
        inset 0 1px 0 rgba(255, 255, 255, 0.15),
        0 2px 6px rgba(0, 0, 0, 0.4),
        0 0 8px rgba($sr-gold, 0.2);
    }

    &:focus-visible {
      outline: $sr-focus-outline;
      outline-offset: 2px;
      box-shadow: $sr-focus-glow;
    }
  }

  .Button--selected {
    background: linear-gradient(
      135deg,
      rgba($sr-gold, 0.3),
      rgba($sr-gold, 0.15)
    ) !important;
    border-color: rgba($sr-gold, 0.6) !important;
    color: $sr-gold !important;
  }

  .Button--disabled {
    background: rgba(40, 40, 45, 0.5) !important;
    border-color: rgba(255, 255, 255, 0.05) !important;
    color: rgba(255, 255, 255, 0.35) !important;
    cursor: not-allowed;
  }

  // Input styling
  .Input {
    background: $sr-bg-input;
    border: 1px solid $sr-border-light;
    border-radius: 2px;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);

    &:focus,
    &:focus-within {
      border-color: $sr-border-gold;
      box-shadow:
        inset 0 2px 4px rgba(0, 0, 0, 0.3),
        0 0 8px rgba($sr-gold, 0.2);
    }

    &:focus-visible {
      outline: $sr-focus-outline;
      outline-offset: 1px;
    }
  }

  // Dropdown styling
  .Dropdown__control {
    background: linear-gradient(
      135deg,
      rgba(40, 40, 45, 0.9),
      rgba(25, 25, 30, 0.95)
    );
    border: 1px solid $sr-border-light;
    border-radius: 2px;
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.1),
      0 2px 4px rgba(0, 0, 0, 0.3);

    &:hover {
      border-color: $sr-border-gold;
    }

    &:focus-visible {
      outline: $sr-focus-outline;
      outline-offset: 2px;
      box-shadow: $sr-focus-glow;
    }
  }

  .Dropdown__arrow-button {
    background: rgba($sr-gold, 0.2);
    border-left: 1px solid $sr-border-light;

    &:hover {
      background: rgba($sr-gold, 0.35);
    }
  }

  .Dropdown__menu {
    background: $sr-bg-panel;
    border: 1px solid $sr-border-light;
    border-radius: 2px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
  }

  .Dropdown__menuentry {
    transition: all 0.1s ease;

    &:hover {
      background: rgba($sr-gold, 0.25);
    }

    &:focus-visible {
      outline: none;
      background: rgba($sr-cyan, 0.25);
      box-shadow: inset 0 0 0 2px $sr-focus-color;
    }
  }

  .Dropdown__menuentry--selected {
    background: rgba($sr-gold, 0.35);
    border-left: 2px solid $sr-gold;
  }

  // LabeledList styling
  .LabeledList__row {
    border-bottom: 1px solid $sr-border-light;
    transition: background 0.15s ease;

    &:hover {
      background: rgba(255, 255, 255, 0.02);
    }

    &:last-child {
      border-bottom: none;
    }
  }

  .LabeledList__cell {
    padding: 0.4em 0.5em;
    vertical-align: middle;
  }

  .LabeledList__label {
    color: rgba(255, 255, 255, 0.65);
    font-size: 0.95em;
    letter-spacing: 0.02em;
  }

  // Table styling
  .Table__row {
    border-bottom: 1px solid $sr-border-light;
    transition: background 0.15s ease;

    &:hover {
      background: rgba(255, 255, 255, 0.03);
    }
  }

  // Tabs styling
  .Tabs__Tab {
    border: 2px solid $sr-border-light;
    background: $sr-bg-dark;
    font-family: $sr-font-display;
    letter-spacing: 0.01em;

    &:focus-visible {
      outline: $sr-focus-outline;
      outline-offset: 2px;
      box-shadow: $sr-focus-glow;
    }
  }

  .Tabs__Tab--selected {
    border-color: rgba($sr-gold, 0.85);
    background: rgba(0, 0, 0, 0.3);
  }

  // NoticeBox styling
  .NoticeBox {
    border-left: 3px solid $sr-gold;
    background: rgba($sr-gold, 0.1);
  }

  .NoticeBox--danger {
    border-left-color: $sr-bad;
    background: rgba($sr-bad, 0.1);
  }

  .NoticeBox--success {
    border-left-color: $sr-good;
    background: rgba($sr-good, 0.1);
  }

  // ProgressBar styling
  .ProgressBar {
    background: $sr-bg-darker;
    border-radius: 2px;
  }

  .ProgressBar__fill {
    background: linear-gradient(90deg, $sr-gold-dim, $sr-gold);
  }

  .ProgressBar__fill--good {
    background: linear-gradient(
      90deg,
      color.adjust($sr-good, $lightness: -10%),
      $sr-good
    );
  }

  .ProgressBar__fill--bad {
    background: linear-gradient(
      90deg,
      color.adjust($sr-bad, $lightness: -10%),
      $sr-bad
    );
  }
}

// =============================================================================
// UTILITY CLASSES
// =============================================================================

// Text hints with subtle underline
.Shadowrun__hint {
  border-bottom: 1px solid rgba(255, 255, 255, 0.25);
  cursor: help;
}

// Gold accent text
.Shadowrun__accent {
  color: $sr-gold;
}

// Credit/currency display
.Shadowrun__credits {
  color: $sr-gold-bright;
  font-weight: bold;

  &::before {
    content: 'Â¥';
  }
}

// Corp badge styling
.Shadowrun__corp-badge {
  display: inline-block;
  padding: 0.15em 0.5em;
  border: 1px solid $sr-border-light;
  border-radius: 2px;
  background: $sr-bg-dark;
  font-size: 0.85em;
  text-transform: uppercase;
  letter-spacing: 0.05em;

  &--renraku {
    border-color: rgba($sr-renraku-red, 0.5);
    color: $sr-renraku-red;
  }

  &--shiawase {
    border-color: rgba($sr-shiawase-orange, 0.5);
    color: $sr-shiawase-orange;
  }

  &--lone-star {
    border-color: rgba($sr-lone-star-blue, 0.5);
    color: $sr-lone-star-blue;
  }

  &--docwagon {
    border-color: rgba($sr-docwagon-green, 0.5);
    color: $sr-docwagon-green;
  }
}

// Panel header styling
.Shadowrun__header {
  background: linear-gradient(
    135deg,
    rgba(0, 0, 0, 0.6),
    rgba(15, 15, 15, 0.8)
  );
  border-left: 4px solid $sr-gold;
  padding: 1rem 1.2rem;
  margin-bottom: 1rem;
  position: relative;

  &::before {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 120px;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba($sr-gold, 0.08));
    pointer-events: none;
  }
}

.Shadowrun__header__title {
  font-family: $sr-font-display;
  font-size: 1.5rem;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: $sr-gold;
  text-shadow:
    0 0 10px $sr-gold-glow,
    0 0 20px rgba($sr-gold, 0.2);
}

.Shadowrun__header__subtitle {
  font-family: $sr-font-body;
  font-size: 1.15rem;
  opacity: 0.85;
  letter-spacing: 0.02em;
}

// Status indicator
.Shadowrun__status {
  display: inline-flex;
  align-items: center;
  gap: 0.35em;

  &--good {
    color: $sr-good;
    text-shadow: 0 0 8px rgba($sr-good, 0.5);
  }

  &--bad {
    color: $sr-bad;
    text-shadow: 0 0 8px rgba($sr-bad, 0.5);
  }

  &--caution {
    color: $sr-caution;
    text-shadow: 0 0 8px rgba($sr-caution, 0.5);
  }

  &--neutral {
    color: $sr-neutral;
  }
}

// =============================================================================
// CRT / SCANLINE EFFECTS
// =============================================================================

// Subtle scanline overlay - apply to containers
.Shadowrun__scanlines {
  position: relative;

  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
    z-index: 100;
    background: repeating-linear-gradient(
      0deg,
      rgba(0, 0, 0, 0.08) 0px,
      rgba(0, 0, 0, 0.08) 1px,
      transparent 1px,
      transparent 3px
    );
  }
}

// Heavier scanline effect for CRT terminal look
.Shadowrun__crt {
  position: relative;

  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
    z-index: 100;
    background: repeating-linear-gradient(
      0deg,
      rgba(0, 0, 0, 0.15) 0px,
      rgba(0, 0, 0, 0.15) 1px,
      transparent 1px,
      transparent 2px
    );
  }

  // Subtle screen flicker animation
  &::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
    z-index: 99;
    background: rgba(0, 255, 100, 0.015);
    animation: crt-flicker 0.15s infinite;
  }
}

@keyframes crt-flicker {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.97;
  }
}

// RGB chromatic aberration text effect
.Shadowrun__glitch {
  position: relative;

  &::before,
  &::after {
    content: attr(data-text);
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }

  &::before {
    color: $sr-cyan;
    animation: glitch-1 2s infinite linear alternate-reverse;
    clip-path: polygon(0 0, 100% 0, 100% 35%, 0 35%);
  }

  &::after {
    color: $sr-magenta;
    animation: glitch-2 3s infinite linear alternate-reverse;
    clip-path: polygon(0 65%, 100% 65%, 100% 100%, 0 100%);
  }
}

@keyframes glitch-1 {
  0%,
  100% {
    transform: translate(0);
  }
  20% {
    transform: translate(-1px, 1px);
  }
  40% {
    transform: translate(1px, -1px);
  }
  60% {
    transform: translate(-1px, 0);
  }
  80% {
    transform: translate(1px, 0);
  }
}

@keyframes glitch-2 {
  0%,
  100% {
    transform: translate(0);
  }
  25% {
    transform: translate(1px, 0);
  }
  50% {
    transform: translate(-1px, 1px);
  }
  75% {
    transform: translate(0, -1px);
  }
}

// =============================================================================
// NEON GLOW EFFECTS
// =============================================================================

.Shadowrun__neon {
  &--gold {
    color: $sr-gold-bright;
    text-shadow:
      0 0 5px $sr-gold-glow,
      0 0 10px $sr-gold-glow,
      0 0 20px rgba($sr-gold, 0.3);
  }

  &--teal {
    color: $sr-teal-bright;
    text-shadow:
      0 0 5px $sr-teal-glow,
      0 0 10px $sr-teal-glow,
      0 0 20px rgba($sr-teal, 0.3);
  }

  &--purple {
    color: $sr-purple-bright;
    text-shadow:
      0 0 5px $sr-purple-glow,
      0 0 10px $sr-purple-glow,
      0 0 20px rgba($sr-purple, 0.3);
  }

  &--cyan {
    color: $sr-cyan;
    text-shadow:
      0 0 5px $sr-cyan-glow,
      0 0 10px $sr-cyan-glow,
      0 0 20px rgba($sr-cyan, 0.3);
  }

  &--magenta {
    color: $sr-magenta;
    text-shadow:
      0 0 5px $sr-magenta-glow,
      0 0 10px $sr-magenta-glow,
      0 0 20px rgba($sr-magenta, 0.3);
  }

  &--good {
    color: $sr-good;
    text-shadow:
      0 0 5px rgba($sr-good, 0.5),
      0 0 10px rgba($sr-good, 0.4);
  }

  &--bad {
    color: $sr-bad;
    text-shadow:
      0 0 5px rgba($sr-bad, 0.5),
      0 0 10px rgba($sr-bad, 0.4);
  }
}

// Neon box/border glow
.Shadowrun__neon-box {
  &--gold {
    border-color: $sr-gold !important;
    box-shadow:
      0 0 5px $sr-gold-glow,
      0 0 10px rgba($sr-gold, 0.2),
      inset 0 0 5px rgba($sr-gold, 0.1);
  }

  &--teal {
    border-color: $sr-teal !important;
    box-shadow:
      0 0 5px $sr-teal-glow,
      0 0 10px rgba($sr-teal, 0.2),
      inset 0 0 5px rgba($sr-teal, 0.1);
  }

  &--purple {
    border-color: $sr-purple !important;
    box-shadow:
      0 0 5px $sr-purple-glow,
      0 0 10px rgba($sr-purple, 0.2),
      inset 0 0 5px rgba($sr-purple, 0.1);
  }
}

// =============================================================================
// CYBERPUNK PANEL STYLES
// =============================================================================

.Shadowrun__panel {
  background: $sr-bg-panel;
  border: 1px solid $sr-border-light;
  border-radius: 2px;
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.05),
    0 4px 12px rgba(0, 0, 0, 0.4);
  position: relative;
  // Note: overflow visible to allow dropdown menus to extend outside container

  // Corner accent
  &::before {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 40px;
    height: 40px;
    background: linear-gradient(
      135deg,
      transparent 50%,
      rgba($sr-gold, 0.15) 50%
    );
    pointer-events: none;
  }

  &--teal::before {
    background: linear-gradient(
      135deg,
      transparent 50%,
      rgba($sr-teal, 0.15) 50%
    );
  }

  &--purple::before {
    background: linear-gradient(
      135deg,
      transparent 50%,
      rgba($sr-purple, 0.15) 50%
    );
  }
}

// Terminal-style panel
.Shadowrun__terminal {
  background: $sr-bg-terminal;
  border: 1px solid rgba($sr-teal, 0.3);
  border-radius: 2px;
  padding: 1rem;
  font-family: $sr-font-mono;
  font-size: 0.9rem;
  color: $sr-teal;
  position: relative;
  overflow: hidden;

  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
    background: repeating-linear-gradient(
      0deg,
      rgba(0, 0, 0, 0.1) 0px,
      rgba(0, 0, 0, 0.1) 1px,
      transparent 1px,
      transparent 2px
    );
  }

  // Cursor blink
  &__cursor {
    display: inline-block;
    width: 8px;
    height: 1em;
    background: $sr-teal;
    animation: cursor-blink 1s step-end infinite;
  }
}

@keyframes cursor-blink {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0;
  }
}

// =============================================================================
// DATA DISPLAY ELEMENTS
// =============================================================================

// Stat display with neon accent
.Shadowrun__stat {
  display: inline-flex;
  align-items: baseline;
  gap: 0.25em;

  &__value {
    font-size: 1.5em;
    font-weight: bold;
    color: $sr-gold-bright;
    text-shadow: 0 0 8px $sr-gold-glow;
  }

  &__label {
    font-size: 0.85em;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    opacity: 0.7;
  }

  &--physical &__value {
    color: $sr-gold-bright;
    text-shadow: 0 0 8px $sr-gold-glow;
  }

  &--mental &__value {
    color: $sr-purple-bright;
    text-shadow: 0 0 8px $sr-purple-glow;
  }

  &--special &__value {
    color: $sr-teal-bright;
    text-shadow: 0 0 8px $sr-teal-glow;
  }
}

// Animated loading bar
.Shadowrun__loading {
  height: 4px;
  background: $sr-bg-darker;
  border-radius: 2px;
  overflow: hidden;
  position: relative;

  &::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, $sr-teal, transparent);
    animation: loading-sweep 1.5s infinite;
  }
}

@keyframes loading-sweep {
  0% {
    left: -100%;
  }
  100% {
    left: 100%;
  }
}
// Clickable validation issue in SaveResetBar
.PreferencesMenu__ShadowrunSheet__validationIssue--clickable {
  &:hover {
    background: rgba(255, 255, 255, 0.1);
  }

  &:active {
    background: rgba(255, 255, 255, 0.15);
  }
}
